<!DOCTYPE html>
<html lang="de">
<head>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCSn9mCvNT6JZgXy5ZTIOeVhri4FQRvn9E",
    authDomain: "sigma-the-game.firebaseapp.com",
    projectId: "sigma-the-game",
    storageBucket: "sigma-the-game.appspot.com",
    messagingSenderId: "346310580482",
    appId: "1:346310580482:web:a7e6f835eb4dd541964a1b"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sigma The Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@400;700&display=swap');
    
    :root {
      --main-bg: #0c0c14;
      --card-bg: #1a1a24;
      --accent-color: #ffce00;
      --accent-glow: rgba(255, 206, 0, 0.6);
      --hover-glow: rgba(255, 206, 0, 0.3);
      --text-primary: #ffffff;
      --text-secondary: #aaaaaa;
      --locked-color: #444444;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      transition: all 0.3s ease;
    }
    
    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, #0c0c14 0%, #151530 100%);
      color: var(--text-primary);
      text-align: center;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }
    
    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(circle at 20% 30%, rgba(37, 37, 135, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(45, 40, 125, 0.1) 0%, transparent 50%);
      pointer-events: none;
    }
    
    .menu-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 40px 20px;
      gap: 30px;
      position: relative;
      z-index: 1;
    }
    
    h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 48px;
      font-weight: 900;
      letter-spacing: 3px;
      margin-bottom: 10px;
      text-shadow: 0 0 15px rgba(255, 206, 0, 0.5),
                   0 0 30px rgba(255, 206, 0, 0.2);
      animation: title-glow 3s infinite alternate;
      background: linear-gradient(to right, #fff, var(--accent-color), #fff);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      position: relative;
    }
    
    h3 {
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 5px;
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 1px;
      color: var(--text-primary);
      opacity: 0;
      animation: fade-in 0.8s forwards 0.5s;
    }

    input[type="text"] {
      padding: 12px 20px;
      font-size: 16px;
      width: 300px;
      max-width: 90%;
      border-radius: 30px;
      border: 2px solid transparent;
      background-color: rgba(255, 255, 255, 0.08);
      color: var(--text-primary);
      text-align: center;
      outline: none;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      transform: translateY(20px);
      opacity: 0;
      animation: slide-up 0.8s forwards 0.3s;
    }
    
    input[type="text"]:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 15px var(--accent-glow);
    }
    
    input[type="text"]::placeholder {
      color: var(--text-secondary);
      opacity: 0.7;
    }
    
    .passive-selection {
      display: flex;
      gap: 25px;
      justify-content: center;
      flex-wrap: wrap;
      margin: 10px 0 30px;
      perspective: 1000px;
      opacity: 0;
      animation: fade-in 0.8s forwards 0.7s;
    }
    
    .passive-option {
      background: linear-gradient(145deg, var(--card-bg), #232335);
      padding: 22px 18px;
      border-radius: 12px;
      border: 2px solid #333344;
      width: 220px;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      box-shadow: 0 7px 20px rgba(0, 0, 0, 0.3);
      transform: translateZ(0);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    
    .passive-option:hover:not(.locked) {
      transform: translateY(-10px) scale(1.03);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4), 0 0 15px var(--hover-glow);
      border-color: rgba(255, 206, 0, 0.4);
    }
    
    .passive-option::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
      opacity: 0;
      transform: scale(0.5);
      transition: all 0.6s ease;
      z-index: -1;
    }
    
    .passive-option:hover:not(.locked)::before {
      opacity: 0.15;
      transform: scale(1);
    }
    
    .passive-option.locked {
      opacity: 0.6;
      background: linear-gradient(145deg, #1a1a24, #252530);
      border-color: var(--locked-color);
      pointer-events: none;
      filter: grayscale(50%);
    }
    
    .passive-option.active {
      border-color: var(--accent-color);
      box-shadow: 0 0 20px var(--accent-glow);
      transform: translateY(-5px);
    }
    
    .passive-option.active:hover {
      transform: translateY(-10px) scale(1.03);
    }
    
    .passive-option strong {
      display: block;
      font-family: 'Orbitron', sans-serif;
      font-size: 18px;
      margin-bottom: 8px;
      color: var(--accent-color);
      position: relative;
      transform: translateZ(10px);
    }
    
    .passive-option p {
      font-size: 14px;
      line-height: 1.5;
      margin-bottom: 10px;
      color: var(--text-primary);
      transform: translateZ(5px);
    }
    
    .passive-option em {
      display: block;
      font-size: 12px;
      font-style: italic;
      color: var(--text-secondary);
      margin-top: 8px;
      transform: translateZ(5px);
    }
    
    .new-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: var(--accent-color);
      color: black;
      padding: 3px 8px;
      border-radius: 10px;
      font-size: 12px;
      font-weight: bold;
      transform: rotate(15deg);
      animation: pulse 1.5s infinite alternate;
    }
    
    button {
      padding: 14px 34px;
      font-size: 18px;
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 1px;
      border-radius: 30px;
      border: none;
      background: linear-gradient(135deg, var(--accent-color), #ffa200);
      color: #111;
      font-weight: bold;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3), 0 0 15px rgba(255, 206, 0, 0.4);
      transform: translateY(20px);
      opacity: 0;
      animation: slide-up 0.8s forwards 0.9s;
    }
    
    button::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.8) 0%, transparent 60%);
      opacity: 0;
      transition: opacity 0.4s ease;
      transform: translate(-100px, -100px) scale(0.1);
    }
    
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 206, 0, 0.6);
    }
    
    button:active {
      transform: translateY(2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    button:hover::before {
      opacity: 0.3;
      transform: translate(100px, 100px) scale(3);
      transition: transform 1s ease, opacity 0.4s ease;
    }
    
    @keyframes title-glow {
      0%, 20% {
        text-shadow: 0 0 15px rgba(255, 206, 0, 0.5),
                     0 0 30px rgba(255, 206, 0, 0.2);
      }
      80%, 100% {
        text-shadow: 0 0 20px rgba(255, 206, 0, 0.7),
                     0 0 40px rgba(255, 206, 0, 0.4),
                     0 0 60px rgba(255, 206, 0, 0.2);
      }
    }
    
    @keyframes slide-up {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fade-in {
      to {
        opacity: 1;
      }
    }
    
    @keyframes pulse {
      0% {
        transform: scale(1) rotate(15deg);
      }
      100% {
        transform: scale(1.1) rotate(15deg);
      }
    }
    
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .particle {
      position: absolute;
      width: 3px;
      height: 3px;
      background: var(--accent-color);
      border-radius: 50%;
      opacity: 0.2;
      animation: float 20s linear infinite;
    }

    @keyframes float {
      0% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.5;
      }
      90% {
        opacity: 0.5;
      }
      100% {
        transform: translateY(-800px) translateX(100px) rotate(360deg);
        opacity: 0;
      }
    }
    
    @media (max-width: 768px) {
      .passive-selection {
        gap: 15px;
      }
      
      .passive-option {
        width: 180px;
        padding: 15px;
      }
      
      h1 {
        font-size: 36px;
      }
      
      button {
        padding: 12px 28px;
        font-size: 16px;
      }
    }

    @media (max-width: 480px) {
      .passive-option {
        width: 90%;
        max-width: 280px;
      }
    }
  </style>
</head>
<body>
  <div class="particles" id="particles"></div>
  
  <div class="menu-container" id="mainMenu">
    <h1>SIGMA THE GAME</h1>
    <input type="text" id="playerNameInput" placeholder="Spielername eingeben" maxlength="15" autocomplete="off" required />
    <h3>W√§hle eine passive F√§higkeit</h3>

    <div class="passive-selection">
      <div class="passive-option active" data-passive="swordfighter">
        <strong>Schwertk√§mpfer</strong>
        <p>Schwert macht +2 Schaden</p>
      </div>

      <div class="passive-option" data-passive="shieldmaster">
        <strong>Schildmeister</strong>
        <p>Jede Runde +5 Schild.<br/>Schwerter machen -1 Schaden.</p>
      </div>
      
      <div class="passive-option" data-passive="martyr">
        <strong>M√§rtyrer</strong>
        <p>Bonus-Schaden je mehr Leben dir fehlt.</p>
      </div>      

      <div class="passive-option locked" data-passive="goldboy">
        <strong>Goldjunge</strong>
        <p>Starte mit 1000 Gold</p>
        <em>Freigeschaltet nach Sieg √ºber Nekromant</em>
      </div>   

      <div class="passive-option locked" data-passive="dragonscale">
        <strong>Drachenschuppen</strong>
        <p>Immun gegen Statuseffekte. Verbrenne Gegner zu 20%.</p>
        <em>Freigeschaltet nach Sieg √ºber Drache</em>
      </div>

      <div class="passive-option locked" data-passive="undead">
        <strong>Totenbeschw√∂rer</strong>
        <p>Beschw√∂re einen Teufelshund an deiner Seite.<br/>Verbesserbar mit Totenkeule.</p>
        <em>Freigeschaltet nach Sieg √ºber Teufel</em>
      </div>   
    </div>

    <div style="display: flex; gap: 15px; justify-content: center;">
      <button id="monsterWikiButton" style="padding: 8px 16px; font-size: 14px;">
        üìö Monster-Wiki
      </button>
      <button id="cardWikiButton" style="padding: 8px 16px; font-size: 14px;">
        üÉè Karten-Wiki
      </button>
      <button onclick="startGame()" id="startButton">Neues Spiel starten</button>
    </div>
    
    

    <div id="leaderboardDisplay" style="margin-top: 30px;">
      <h3>üèÜ Highscore-Liste</h3>
      <ol id="leaderboardList" style="text-align: mid; font-size: 18px; max-width: 300px; margin: 0 auto; font-family: monospace;"></ol>
    </div>
    
    
  </div>



  <div id="monsterWikiModal" style="display:none;">
    <div style="
      position: fixed;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      max-width: 850px;
      max-height: 80vh;
      overflow-y: auto;
      background-color: var(--card-bg);
      color: var(--text-primary);
      border: 2px solid var(--accent-color);
      border-radius: 12px;
      padding: 20px;
      z-index: 1000;
      box-shadow: 0 0 30px var(--accent-glow);
    ">
      <h2 style="margin-bottom: 15px;">üßü Monster-Wiki</h2>
      <div id="monsterList" style="text-align: left; font-family: monospace;"></div>
      <button onclick="closeMonsterWiki()" style="margin-top: 20px;">Schlie√üen</button>
    </div>
  </div>
  
  <div id="cardWikiModal" style="display:none;">
    <div style="
      position: fixed;
      top: 8%;
      left: 50%;
      transform: translateX(-50%);
      width: 95%;
      max-width: 1000px;
      max-height: 80vh;
      overflow-y: auto;
      background-color: var(--card-bg);
      color: var(--text-primary);
      border: 2px solid var(--accent-color);
      border-radius: 12px;
      padding: 20px;
      z-index: 1000;
      box-shadow: 0 0 30px var(--accent-glow);
    ">
      <h2 style="margin-bottom: 15px;">üÉè Karten-Wiki</h2>
      <div id="cardList" style="
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 15px;
      "></div>
      <button onclick="closeCardWiki()" style="margin-top: 20px;">Schlie√üen</button>
    </div>
  </div>
  
  

  <script>
    let selectedPassive = 'swordfighter';

    document.addEventListener('DOMContentLoaded', () => {
      // Partikel erstellen
      const particlesContainer = document.getElementById('particles');
      for (let i = 0; i < 30; i++) {
        createParticle(particlesContainer);
      }

      const passiveOptions = document.querySelectorAll('.passive-option');

      // Aktuelle Auswahl auslesen, falls schon vorhanden
      const initiallySelected = document.querySelector('.passive-option.active');
      if (initiallySelected && !initiallySelected.classList.contains('locked')) {
        selectedPassive = initiallySelected.dataset.passive;
      }

      // Audio-Effekte erstellen
      const hoverSound = new Audio();
      hoverSound.volume = 0.2;
      
      const clickSound = new Audio();
      clickSound.volume = 0.3;
      
      try {
        hoverSound.src = "data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAAAwAAAbAAkJCQkJCQkJCQkJCQkJCQwMDAwMDAwMDAwMDAwMDAwMD////////////////////////////////////////AAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAYBAAAAAAAAAbAwljdpJQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANmAZYeUAAAP1Tjs7jgEEYhEIQgEesXP/6P/KBgYHuCAJRJIv/xTD//yYf/1AgZeD/5h8G5hDf/8IP8MOA+D+W43UEDBB4DgBAEAwD/+MYxA8OUjo2eVgYA4wfggBAIBgMHgT+I4YPAcBwJ/lQMHgOD8gcQIAQdguAZJZbWtb2SILYvA8DgGDwGBF5XAcB4w5/y5WCNkZnLFZUyj3LU2pmHipeCDfcjGXVmG7GHL38Zf/7lz/+MYxAsNkAI4KUMwAhzVnVz/1qvuCPYzS7qW/uJ3Vx7KqtVdxGrV+zJHdS/FarYxip1qpKrYzfL20aF2uohtrK8VnXRXK3TTTKHblSpJpqFJNM0ykmmYaKSaaiYjO3///N0L//Bs7//+MYxBAK0Hm8KUEQAQLg6Kh4MFEimMVMU1JiMS7tmrJf/UuXNG7dq1a89tbXrfzTdI2dKXcvT9O4VnRdGkbdTGjZJMtp+W2pISEhISEhISGWOyybf///5YyQkJCB4wSEhISVJW0e/+MYxCENKIHxmgmEjhNyMrIxjIwwI8JUpG7cgZFOilqRpUiMjtaf+SKcJlfK3///+lS3//+WTv///////pIxO////+UkEgkEgkZBIJBIJPR+dBKOjo6Ojo4Pnzo6Ojo6Ojo6Ojo6OgAA";
        clickSound.src = "data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAAAwAAAUdRp6enp6enp6enp6enp6fIyMjIyMjIyMjIyMjIyMjI6urq6urq6urq6urq6urq6v////////////////////////////////8AAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAUZAAAAAAAAARdR/pkxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAAMOF5IeUAQADCAQCgNHjx48ePHj7+IJRI0ePHjx48ff4gkaXGQJMeTDjyZMmTBgwYMGDBgwYJGlxo0uNLly48mTJk4iCRpce//fvyZMmDABA0aNL/JEETBgwYME//liIJGl8Q1GP/f/+MYxBUOKF4cGZCMAEqNLjRo0aXGlxpf/3/6XGjRoy5wY+XOMP0zYCBAg89TU59amWYMtJM9SX7yCQJ337zOlpaWlpaWknfvvvvvvvvvvgQFBQUFBQUAAAAAAAAAAAAAlT//ffeSwLhS/+MYxBkIAAJkGYEQAC/Z2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ";
      } catch(e) {
        console.error("Audio-Effekte konnten nicht geladen werden:", e);
      }

      // Passiven-Auswahl aktivieren
      passiveOptions.forEach(option => {
        option.addEventListener('mouseover', () => {
          if (option.classList.contains('locked')) return;
          try { hoverSound.play(); } catch(e) {}
          
          const allCards = document.querySelectorAll('.passive-option');
          allCards.forEach(card => {
            if (card !== option && !card.classList.contains('active')) {
              card.style.transform = 'scale(0.95)';
              card.style.opacity = '0.7';
            }
          });
        });

        option.addEventListener('mouseout', () => {
          const allCards = document.querySelectorAll('.passive-option');
          allCards.forEach(card => {
            if (!card.classList.contains('active')) {
              card.style.transform = '';
              card.style.opacity = '';
            }
          });
        });

        option.addEventListener('click', () => {
          if (option.classList.contains('locked')) return;
          
          try { clickSound.play(); } catch(e) {}

          passiveOptions.forEach(el => {
            el.classList.remove('active');
            el.style.transform = '';
            el.style.opacity = '';
          });
          
          option.classList.add('active');
          selectedPassive = option.dataset.passive;
          
          // Visueller Effekt beim Klick
          const ripple = document.createElement('div');
          ripple.style.position = 'absolute';
          ripple.style.width = '5px';
          ripple.style.height = '5px';
          ripple.style.borderRadius = '50%';
          ripple.style.backgroundColor = 'rgba(255, 206, 0, 0.7)';
          ripple.style.top = '50%';
          ripple.style.left = '50%';
          ripple.style.transform = 'translate(-50%, -50%)';
          ripple.style.animation = 'ripple 0.7s linear';
          
          option.appendChild(ripple);
          
          setTimeout(() => {
            option.removeChild(ripple);
          }, 700);
          
          console.log("üß† Ausgew√§hlte Passive:", selectedPassive);
        });
      });

      // Neues Spiel starten mit Animation
      window.startGame = function() {
        const nameInput = document.getElementById('playerNameInput');
        const playerName = nameInput?.value.trim();

        if (!playerName || playerName.length < 1) {
          alert("Bitte gib einen g√ºltigen Namen ein (max. 15 Zeichen).");
          return;
        }

        localStorage.setItem('playerName', playerName);
        localStorage.setItem('selectedPassive', selectedPassive);

        console.log("üéÆ Spielername:", playerName);
        console.log("üîí Gespeicherte Passive:", selectedPassive);

        // Animation beim Start
        const menuContainer = document.getElementById('mainMenu');
        menuContainer.style.opacity = '0';
        menuContainer.style.transform = 'scale(1.1)';

        try { clickSound.play(); } catch(e) {}

        setTimeout(() => {
          window.location.href = 'spiel.html';
        }, 800);
      };


      // Tastatur-Event f√ºr Enter-Taste
      document.getElementById('playerNameInput').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
          startGame();
        }
      });

      // Button Animation hinzuf√ºgen
      const startButton = document.getElementById('startButton');
      startButton.addEventListener('mousemove', function(e) {
        const x = e.pageX - this.offsetLeft;
        const y = e.pageY - this.offsetTop;
        
        this.style.setProperty('--x', x + 'px');
        this.style.setProperty('--y', y + 'px');
      });

      // Freigeschaltete Passiven anzeigen
      function unlockPassive(passiveId) {
        const elem = document.querySelector(`[data-passive="${passiveId}"]`);
        if (!elem) return;

        elem.classList.remove('locked');

        if (!elem.querySelector('.new-badge')) {
          const badge = document.createElement('div');
          badge.className = 'new-badge';
          badge.textContent = 'NEU!';
          elem.appendChild(badge);
        }
      }

      // Unlock-Status pr√ºfen
      if (localStorage.getItem('unlockedGoldboy') === 'true') unlockPassive('goldboy');
      if (localStorage.getItem('unlockedDragonscale') === 'true') unlockPassive('dragonscale');
      if (localStorage.getItem('unlockedUndead') === 'true') unlockPassive('undead');
    });

    // Funktion zum Erstellen von Partikeln
    function createParticle(container) {
      const particle = document.createElement('div');
      particle.classList.add('particle');
      
      // Zuf√§llige Position, Gr√∂√üe und Verz√∂gerung
      const size = Math.random() * 3 + 1;
      const posX = Math.random() * window.innerWidth;
      const posY = Math.random() * window.innerHeight + window.innerHeight;
      const delay = Math.random() * 20;
      const duration = Math.random() * 10 + 15;
      const brightness = Math.random() * 80 + 20;
      
      particle.style.width = `${size}px`;
      particle.style.height = `${size}px`;
      particle.style.left = `${posX}px`;
      particle.style.top = `${posY}px`;
      particle.style.opacity = Math.random() * 0.3;
      particle.style.animationDuration = `${duration}s`;
      particle.style.animationDelay = `${delay}s`;
      particle.style.filter = `brightness(${brightness}%)`;
      
      container.appendChild(particle);
      
      // Partikel nach Animation neu erstellen
      setTimeout(() => {
        container.removeChild(particle);
        createParticle(container);
      }, (delay + duration) * 1000);
    }

    // Stelle sicher, dass wir auch Partikel erstellen, wenn DOMContentLoaded bereits ausgel√∂st wurde
    if (document.readyState === 'complete' || document.readyState === 'interactive') {
      const particlesContainer = document.getElementById('particles');
      if (particlesContainer) {
        for (let i = 0; i < 30; i++) {
          createParticle(particlesContainer);
        }
      }
    }

    // Style-Element f√ºr die Ripple-Animation erstellen
    const styleElement = document.createElement('style');
    styleElement.textContent = `
      @keyframes ripple {
        0% {
          width: 5px;
          height: 5px;
          opacity: 1;
        }
        100% {
          width: 300px;
          height: 300px;
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(styleElement);

// Globale Highscores aus Firestore anzeigen
db.collection("highscores")
  .orderBy("score", "desc")
  .limit(10)
  .get()
  .then(snapshot => {
    const leaderboardList = document.getElementById('leaderboardList');
    leaderboardList.innerHTML = '';
    snapshot.forEach(doc => {
      const entry = doc.data();
      const li = document.createElement('li');
      li.textContent = `${entry.name.padEnd(12)} - ${entry.score} Kills (Lvl ${entry.level})`;
      leaderboardList.appendChild(li);
    });
  })
  .catch(err => {
    console.warn("‚ö†Ô∏è Highscore konnte nicht geladen werden:", err);
  });


  const monsters = [
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Goblin', health: 20, attack: 5, levelMin: 1, levelMax: 5, xp: 35, gold: 70, pixelImageKey: 'Goblin', description: 'Ein kleiner, flinker Goblin.', traits: ['Keine F√§higkeit'] },
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Gepanzertes Skelett', health: 25, attack: 4, levelMin: 2, levelMax: 6, xp: 55, gold: 85, pixelImageKey: 'armorskelett', description: 'Ein ehmaliger stolzer Krieger.', traits: ['R√ºstung'] },
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Ork', health: 35, attack: 5, levelMin: 3, levelMax: 7, xp: 60, gold: 65, pixelImageKey: 'Ork', description: 'Ein brutaler Ork-Krieger.', traits: ['Stark'] },
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Riesen Spinne', health: 40, attack: 6, levelMin: 4, levelMax: 7, xp: 65, gold: 110, pixelImageKey: 'Riesen Spinne', description: 'Spuckt l√§hmendes Gift.', traits: ['Giftig'] }, // 'Netzwerfer' Effekt muss implementiert werden
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Troll', health: 50, attack: 8, levelMin: 5, levelMax: 9, xp: 70, gold: 120, pixelImageKey: 'Troll', description: 'Regeneriert 3 Leben pro Runde.', traits: ['Regeneration', 'Massiv'], regen: 3 }, // Regeneration implementiert
                { name: 'Donnerschlange', health: 45, attack: 9, levelMin: 6, levelMax: 10, xp: 120, gold: 135, pixelImageKey: 'snake', description: 'Eine l√§hmende Donnerschlange', traits: ['Statisch'] },
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Nekromant', health: 50, attack: 7, levelMin: 8, levelMax: 12, xp: 80, gold: 160, pixelImageKey: 'Nekromant', description: 'Schw√§cht dich oder ruft Diener.', traits: ['Untotenbeschw√∂rer'] }, // Effekte m√ºssen implementiert werden
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Eisk√∂nig', health: 65, attack: 9, levelMin: 9, levelMax: 13, xp: 100, gold: 180, pixelImageKey: 'Eisk√∂nig', description: 'Verlangsamt dich mit K√§lte.', traits: ['Eis-Elementar', 'Frost-Aura'] }, // Effekte m√ºssen implementiert werden
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Baby Drache', health: 60, attack: 11, levelMin: 10, levelMax: 14, xp: 120, gold: 230, pixelImageKey: 'BabyDrache', description: 'Speit Feuerst√∂√üe.', traits: ['Verspielt', 'Feueratem'] }, // Effekte m√ºssen implementiert werden
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Charged Golem', health: 70, attack: 9, levelMin: 11, levelMax: 15, xp: 170, gold: 260, pixelImageKey: 'golem', description: 'M√§chtiger Elementar Golem.', traits: ['Statisch', 'Regeneration'], regen: 3 }, // Effekte m√ºssen implementiert werden
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Dracula', health: 65, attack: 9, levelMin: 12, levelMax: 16, xp: 190, gold: 300, pixelImageKey: 'drakula', description: 'Dein Blut macht ihn st√§rker.', traits: ['Vamp', 'Stark'] }, // Effekte m√ºssen implementiert werden
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'D√§mon', health: 75, attack: 12, levelMin: 13, levelMax: 18, xp: 280, gold: 360, pixelImageKey: 'demon', description: 'Feuer und Schatten. Resistent.', traits: ['H√∂llen Krallen'] }, // Effekte m√ºssen implementiert werden
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Verfluchter Ritter', health: 70, attack: 9, levelMin: 14, levelMax: 18, xp: 360, gold: 400, pixelImageKey: 'CursedKnight', description: 'Ein wandelnde Geisterr√ºstung', traits: ['R√ºstung', 'Krieger']}, // Effekte m√ºssen implementiert werden
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Erzengel', health: 90, attack: 12, levelMin: 15, levelMax: 19, xp: 400, gold: 450, pixelImageKey: 'Erzengel', description: 'Ein m√§chtiger gefallener Engel.', traits: ['Segen', 'Fliegend'] }, // Effekte m√ºssen implementiert werden
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Gargoyle', health: 95, attack: 14, levelMin: 16, levelMax: 20, xp: 450, gold: 480, pixelImageKey: 'Gargoyle', description: 'Einst da um die Menschen zu besch√ºtzen. Jetzt ein unb√§ndiges Monster', traits: ['Gepanzerte Schuppen'] }, 
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Drache', health: 110, attack: 16, levelMin: 17, levelMax: 21, xp: 650, gold: 600, pixelImageKey: 'Drache', description: 'Ein m√§chtiger, alter Drache.', traits: ['Feueratem', 'Fliegend', 'Gepanzerte Schuppen'] }, 
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Teufel', health: 70, attack: 5, levelMin: 18, levelMax: 23, xp: 750, gold: 800, pixelImageKey: 'Teufel', description: 'Der Herrscher der Unterwelt.', traits: ['H√∂llenwache'] },
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Rainbow', health: 80, attack: 10, levelMin: 19, levelMax: 24, xp: 800, gold: 800, pixelImageKey: 'Rainbow', description: 'Der einzig wahre Elementar Herrscher', traits: ['Frost-Aura', 'Giftig', 'Feueratem'] },
    ¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†¬† { name: 'Yagdril', health: 130, attack: 15, levelMin: 20, levelMax: 100, xp: 1000, gold: 1000, pixelImageKey: 'Yagdril', description: 'Ein Wesen dessen Macht unbeschreiblich ist', traits: ['Fliegend', 'Segen'] } 
];

document.getElementById("monsterWikiButton").addEventListener("click", function () {
  const container = document.getElementById("monsterList");
  container.innerHTML = monsters.map(monster => `
    <div style="display: flex; align-items: center; gap: 15px; padding: 10px 0; border-bottom: 1px solid #333;">
      <img src="images/${monster.pixelImageKey}.png" alt="${monster.name}" style="width: 48px; height: 48px; image-rendering: pixelated;" />
      <div>
        <strong>${monster.name}</strong> (Lvl ${monster.levelMin}-${monster.levelMax})<br/>
        ‚ù§Ô∏è ${monster.health} | üó°Ô∏è ${monster.attack} | ‚≠ê Spawn Level: ${monster.levelMin} | üí∞ ${monster.gold}<br/>
        üß¨ Traits: ${monster.traits.join(', ')}
      </div>
    </div>
  `).join('');
  document.getElementById("monsterWikiModal").style.display = "block";
});

function closeMonsterWiki() {
  document.getElementById("monsterWikiModal").style.display = "none";
}

const cards = [
  { id: 1, name: 'Schwert', icon: '‚öîÔ∏è', description: 'Ein einfaches Schwert.', power: 5, effect: 'damage', manaCost: 2, weight: 11 },
  { id: 2, name: 'Schild', icon: 'üõ°Ô∏è', description: 'Erhalte 5 Block', power: 5, effect: 'block', manaCost: 2, weight: 1 },
  { id: 3, name: 'Heilung', icon: '‚ù§Ô∏è', description: 'Heilt 8 Leben', power: 8, effect: 'heal', manaCost: 3, weight: 2 },
  { id: 4, name: 'Gift', icon: '‚ò†Ô∏è', description: 'Vergiftet (2 Schaden, 3 Rd.) Falls bereit Vergitet mache 3 Schaden', power: 2, duration: 3, effect: 'poison', manaCost: 1, weight: 1 },
  { id: 5, name: 'Blitz', icon: '‚ö°', description: '12 Schaden, Paralysiert Gegner zu 45%', power: 12, effect: 'damage_paralyze', manaCost: 4, weight: 2 },
  { id: 6, name: 'Gro√üer Schlag', icon: 'üí•', description: 'F√ºgt 15 Schaden zu', power: 15, effect: 'damage', manaCost: 4, weight: 2 },
  { id: 7, name: 'Meditieren', icon: 'üßò', description: 'Ziehe 1 Karte', power: 1, effect: 'draw', manaCost: 0, weight: 1 },
  { id: 8, name: 'Vampirbiss', icon: 'üßõ', description: '8 Schaden, heilt 8', power: 8, healAmount: 8, effect: 'lifesteal', manaCost: 4, weight: 2 },
  { id: 9, name: 'Manatrank', icon: 'üß™', description: 'Erhalte 2 Mana', power: 2, effect: 'gain_mana', manaCost: 0, weight: 3 },
  { id: 10, name: 'Fokus', icon: 'üéØ', description: 'Ziehe 2 Karten', power: 2, effect: 'draw', manaCost: 1, weight: 1 },
  { id: 11, name: 'Heilige Macht', icon: '‚ú®', description: 'F√ºgt 25 Schaden zu', power: 25, effect: 'damage', manaCost: 6, weight: 1 },
  { id: 12, name: 'Genesung', icon: 'üíñ', description: 'Heilt 15 Leben', power: 15, effect: 'heal', manaCost: 5, weight: 1 },
  { id: 13, name: 'Feuerpfeil', icon: 'üî•', description: '12 Schaden + Verbrennung (50%)', power: 12, effect: 'firearrow', manaCost: 5, weight: 2 },
  { id: 14, name: 'Gambler‚Äôs Luck', icon: 'üé≤', description: '5 Schaden ODER erhalte Gold', power: 5, effect: 'gamble', manaCost: 0, weight: 1 },
  { id: 15, name: 'Kraft Sammeln', icon: 'üîã', description: 'Heilt dich um gesamtes Mana. Boost i.H.v. Manakosten -1', power: 0, effect: 'power_surge', manaCost: 'X', weight: 1 },
  { id: 16, name: 'Klingenwirbel', icon: 'üåÄ', description: 'Angriff auf mehrere Gegner. Ignoriert Block.', power: 8, effect: 'whirlwind', manaCost: 3, weight: 2 },
  { id: 17, name: 'Todesklinge', icon: '‚öîÔ∏è', description: '25 Schaden. Die st√§rkste aller Schwerter.', power: 30, effect: 'damage', manaCost: 4, weight: 1, rarity: 'superrare' },
  { id: 18, name: 'Mana Oase', icon: 'üß™', description: 'Erhalte 5 Mana', power: 5, effect: 'gain_mana', manaCost: 0, weight: 1, rarity: 'superrare' },
  { id: 19, name: 'Blutrausch', icon: 'üßõ', description: '25 Schaden, heilt 15', power: 25, healAmount: 15, effect: 'lifesteal', manaCost: 7, weight: 1, rarity: 'superrare' },
  { id: 20, name: 'Unwetter', icon: 'üå©Ô∏è', description: 'Paralysiert (2 Runden Angriff halbiert)', power: 0, effect: 'paralyze', manaCost: 2, weight: 2 }
];

document.getElementById("cardWikiButton").addEventListener("click", function () {
  const container = document.getElementById("cardList");
  container.innerHTML = cards.map(card => `
    <div style="
      background: linear-gradient(145deg, var(--card-bg), #2a2a3a);
      border: 2px solid ${card.rarity === 'superrare' ? 'gold' : '#444'};
      border-radius: 12px;
      padding: 12px;
      font-size: 14px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    ">
      <div style="font-size: 22px;">${card.icon}</div>
      <strong>${card.name}</strong><br/>
      <small style="color: var(--text-secondary);">${card.description}</small><br/>
      <div style="margin-top: 6px;">
        üí• Power: ${card.power} <br/>
        üîÆ Mana: ${card.manaCost} <br/>
        üß† Effekt: ${card.effect}
      </div>
    </div>
  `).join('');
  document.getElementById("cardWikiModal").style.display = "block";
});

function closeCardWiki() {
  document.getElementById("cardWikiModal").style.display = "none";
}


  </script>
</body>
</html>